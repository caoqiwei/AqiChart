<Window x:Class="AqiChart.Client.Models.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AqiChart.Client.Models"
        xmlns:cal="http://www.caliburnproject.org" 
        Icon="/Resources/favicon.ico"
        xmlns:conv="clr-namespace:AqiChart.Client.Data"
        mc:Ignorable="d" 
        Title="七聊" Height="770" Width="1200" MinHeight="520" MinWidth="715"
        WindowStartupLocation="CenterScreen" Style="{StaticResource WindowStyle}">
    <Window.Resources>
        <conv:NumberMessageTipConverter x:Key="NumberMessageTipConverter" />
    </Window.Resources>
    <Border Background="{StaticResource bgWindowsBrush}" BorderThickness="0 0 1 1" BorderBrush="#FF9B9B9B">
        <Border.Effect>
            <DropShadowEffect Color="#FF7A7A7A" ShadowDepth="0" BlurRadius="5" Opacity="0.5" Direction="0" />
        </Border.Effect>
        <Grid Background="#F3F3F3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="52" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <!--<Border/>-->
            <StackPanel Orientation="Vertical" Background="#2E2E2E"  MouseLeftButtonDown="Border_MouseLeftButtonDown" >

                <Image Width="38" Source="{Binding User.AvatarUrl}" Stretch="Uniform" Margin="0 20" />
                <StackPanel Orientation="Vertical" HorizontalAlignment="Center">

                    <Grid>
                        <RadioButton Content="&#xe002;" cal:Message.Attach="[Event Checked]=[Action SwitchView('ChatManage')]" Tag="&#xe001;" Style="{StaticResource MenuIconRadioStyle}" IsChecked="True" />
                        <Border Visibility="{Binding ChartCount,Converter={StaticResource NumberMessageTipConverter}}" 
                            HorizontalAlignment="Right" VerticalAlignment="Top" Background="Red" CornerRadius="10" Width="15" Height="15" Margin="2" >
                            <TextBlock Text="{Binding ChartCount}" FontSize="10" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#FFFFFF" />
                        </Border>
                    </Grid>
                    <RadioButton Content="&#xe047;" cal:Message.Attach="[Event Checked]=[Action SwitchView('AddressBook')]" Tag="&#xe048;" Style="{StaticResource MenuIconRadioStyle}" />
                    <RadioButton Content="&#xe009;" cal:Message.Attach="[Event Checked]=[Action SwitchView('TestChat')]" Tag="&#xe00A;" Style="{StaticResource MenuIconRadioStyle}" />
                    <RadioButton Content="&#xe016;" cal:Message.Attach="[Event Checked]=[Action SwitchView('Screenshot')]" Tag="&#xe017;" Style="{StaticResource MenuIconRadioStyle}" />
                </StackPanel>
            </StackPanel>

            <Grid Grid.Column="1">
                <ContentControl x:Name="ActiveItem" cal:View.Model="{Binding ActiveItem}" Margin="0"  />
                <StackPanel Orientation="Horizontal" WindowChrome.IsHitTestVisibleInChrome="True" 
                    VerticalAlignment="Top" HorizontalAlignment="Right">
                    <Button Content="&#xe04D;" Style="{StaticResource SystemBtnStyle}" Click="btnMin_Click" />
                    <Button Content="&#xe04B;" cal:Message.Attach="MaxWindow" >
                        <Button.Style>
                            <Style TargetType="Button" BasedOn="{StaticResource SystemBtnStyle}">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsMaxWindow}" Value="True">
                                        <Setter Property="ToolTip" Value="最大化"></Setter>
                                        <Setter Property="Content" Value="&#xe04B;"></Setter>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsMaxWindow}" Value="False">
                                        <Setter Property="ToolTip" Value="还原"></Setter>
                                        <Setter Property="Content" Value="&#xe04E;"></Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Content="&#xe04C;" Style="{StaticResource SystemCloseBtnStyle}"
                            cal:Message.Attach="HideWindow()" />
                </StackPanel>
            </Grid>

        </Grid>
    </Border>
</Window>
