<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Style x:Key="MessageTextBoxStyle" TargetType="TextBox">
        <Setter Property="Background" Value="#F8F9FA"/>
        <Setter Property="BorderBrush" Value="#E9ECEF"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="12,8"/>
        <Setter Property="FontFamily" Value="Segoe UI, Microsoft YaHei"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="AcceptsReturn" Value="True"/>
        <Setter Property="TextWrapping" Value="Wrap"/>
        <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="BorderBrush" Value="#0084FF"/>
                <Setter Property="Background" Value="White"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <ControlTemplate TargetType="{x:Type TextBox}" x:Key="SearchTextBoxTemplate">
        <Border x:Name="border" 
            Background="#22000000" 
            BorderThickness="2"
            SnapsToDevicePixels="True" 
            CornerRadius="5" 
            BorderBrush="#EAEAEA">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- 搜索图标 -->
                <TextBlock Text="&#xe005;" 
                       Margin="8,0,4,0"
                       FontFamily="{StaticResource iconfont}" 
                       FontSize="15"
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Center"
                       Foreground="#9E9E9E" />

                <!-- 占位文本 -->
                <TextBlock x:Name="searchText" 
                       Text="{TemplateBinding Tag}" 
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Stretch"
                       Grid.Column="1" 
                       Margin="4,0,8,0"
                       Foreground="#9E9E9E" 
                       FontSize="15"
                       IsHitTestVisible="False"
                       Visibility="Collapsed"/>

                <!-- 实际文本输入区域 -->
                <ScrollViewer x:Name="PART_ContentHost" 
                          Grid.Column="1"
                          Margin="4,0,8,0"
                          VerticalAlignment="Center"
                          Background="Transparent"  
                          Focusable="False" 
                          HorizontalScrollBarVisibility="Hidden" 
                          VerticalScrollBarVisibility="Hidden"/>
            </Grid>
        </Border>

        <ControlTemplate.Triggers>
            <!-- 禁用状态 -->
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" TargetName="border" Value="0.56"/>
            </Trigger>

            <!-- 聚焦状态 -->
            <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter Property="BorderBrush" TargetName="border" Value="#7EDBAB"/>
            </Trigger>

            <!-- 鼠标悬停状态 -->
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="BorderBrush" TargetName="border" Value="#CCCCCC"/>
            </Trigger>

            <!-- 显示占位文本的触发器 -->
            <Trigger Property="Text" Value="">
                <Setter TargetName="searchText" Property="Visibility" Value="Visible" />
            </Trigger>

            <!-- 另一种占位文本显示方式（使用Length） -->
            <Trigger Property="Text" Value="{x:Null}">
                <Setter TargetName="searchText" Property="Visibility" Value="Visible" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

</ResourceDictionary>